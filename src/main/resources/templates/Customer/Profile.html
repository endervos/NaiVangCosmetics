<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nai Vang Cosmetic</title>
    <link rel="icon" type="image/png" th:src="@{/Customer/Item/Image/LogoConNai.png}">
    <link rel="stylesheet" th:href="@{/Customer/Profile/Profile.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/vn.js"></script>
    <link rel="stylesheet" th:href="@{/Customer/Home/Home.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script th:src="@{/session.js}"></script>
</head>
<body>
<div class="promo-banner">
    <img th:src="@{/Customer/Item/Image/Example.gif}" alt="Promotion Nai Vang">
</div>
<div class="header">
    <div class="container header-inner">
        <a th:href="@{/}">
            <img th:src="@{/Customer/Item/Image/Logo7.png}" alt="Logo" width="150" height="100">
        </a>
        <div class="search-bar">
            <div class="search-wrap">
                <input type="text" placeholder="Bạn cần tìm ....">
                <span class="search-icon">
            <svg viewBox="0 0 24 27" aria-hidden="true">
              <path d="M10,2C4.5,2,0,6.5,0,12s4.5,10,10,10s10-4.5,10-10S15.5,2,10,2z M10,19c-3.9,0-7-3.1-7-7s3.1-7,7-7s7,3.1,7,7S13.9,19,10,19z"></path>
              <rect x="17" y="17" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -9.2844 19.5856)" width="4" height="8"></rect>
            </svg>
          </span>
            </div>
        </div>
        <div class="header-icons">
            <div class="user-section">
                <button class="user-btn" aria-label="Tài khoản">
                    <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill="currentColor"
                              d="M17.75 14c1.24 0 2.25 1.01 2.25 2.25v.92c0 .57-.18 1.13-.52 1.6C18 20.9 15.5 22 12 22s-6-1.1-7.48-3.23c-.34-.47-.52-1.03-.52-1.6v-.92C4 15.01 5.01 14 6.25 14h11.5ZM12 2a5 5 0 1 1 0 10 5 5 0 0 1 0-10Z"/>
                    </svg>
                </button>
                <div class="user-dropdown">
                    <a th:href="@{/login}" id="login-btn" sec:authorize="isAnonymous()">Đăng nhập</a>
                    <a th:href="@{/sign-up}" id="subcribe-btn" sec:authorize="isAnonymous()">Đăng ký</a>
                    <a th:href="@{/profile}" id="account-info" sec:authorize="isAuthenticated()">Thông tin tài khoản</a>
                    <a th:href="@{/logout}" id="logout-btn" sec:authorize="isAuthenticated()">Đăng xuất</a>
                </div>
            </div>
            <div class="cart-section">
                <a href="#" class="cart-pill" title="Giỏ hàng">
                    <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill="currentColor"
                              d="M7 4h-2l-1 2h2l3.6 7.59-1.35 2.44C7.89 16.37 8.29 17 8.94 17h9.56v-2H9.42l1.1-2h7.25c.75 0 1.41-.41 1.75-1.03L22 7H6.42l-.7-1h1.28L7 4Zm-1 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm12 0a2 2 0 1 0 .001-3.999A2 2 0 0 0 18 20Z"/>
                    </svg>
                    <span>Giỏ hàng</span>
                </a>
            </div>
        </div>
    </div>
</div>
<div class="menu-bar">
    <div class="container menu-inner">
        <div class="dropdown">
            <a href="#">☰ DANH MỤC SẢN PHẨM</a>
            <ul class="dropdown-content">
                <li class="has-submenu" th:each="cat : ${rootCategories}">
                    <a th:href="@{/category/{id}/item(id=${@encryptionUtil.encrypt(cat.categoryId.toString())})}">
                        <img class="menu-icon"
                             th:src="@{/Customer/Home/{icon}(icon=${cat.slug + '.png'})}"
                             th:alt="${cat.name}" />
                        <span th:text="${cat.name}"></span>
                    </a>
                    <ul class="submenu" th:if="${#lists.size(cat.children) > 0}">
                        <li th:each="sub : ${cat.children}">
                            <a th:href="@{/category/{id}/item(id=${@encryptionUtil.encrypt(sub.categoryId.toString())})}">
                                <span th:text="${sub.name}"></span>
                                <span class="count" th:text="${#lists.size(sub.items)}"></span>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="dropdown">
            <a href="#"> NAI VANG BEAUTY</a>
        </div>
        <div class="dropdown">
            <a th:href="@{/blog}">TIN TỨC</a>
        </div>
        <a href="#">TRA CỨU ĐƠN HÀNG</a>
    </div>
</div>
<div class="main-container">
    <aside class="menu-sidebar">
        <h3>Chào <span th:text="${user.fullname}">User</span></h3>
        <ul>
            <li class="menu-item active">
                <a th:href="@{/profile}">Thông tin tài khoản</a>
            </li>
            <li class="menu-item"><a th:href="@{/account}">Quản lý tài khoản</a></li>
            <li class="menu-item"><a th:href="@{/orderManage}">Quản lý đơn hàng</a></li>
        </ul>
    </aside>
    <main class="account-info" th:object="${user}">
        <h2>Thông tin tài khoản</h2>
        <form th:action="@{/profile/update}" th:object="${user}" method="post">
            <div class="profile-container">
                <label>Tài khoản</label>
                <input type="text" th:field="*{email}" disabled />
                <label>Họ và tên</label>
                <input type="text" th:field="*{fullname}"  />
                <label>Số điện thoại</label>
                <input type="text" th:field="*{phoneNumber}"  />
                <div class="form-group">
                    <div class="address-header">
                        <label>Địa chỉ</label>
                        <button type="button" id="addAddressBtn" class="btn-add">Thêm địa chỉ</button>
                    </div>
                    <div id="addressContainer">
                        <div class="address-row"
                             th:each="addr, iter : ${addresses}"
                             th:classappend="${addr.idAddressDefault} ? ' default' : ''">
                            <span class="address-label">Địa chỉ [[${iter.index + 1}]]</span>
                            <input type="text"
                                   name="city[]"
                                   class="address-input city-input"
                                   th:value="${addr.city}"
                                   placeholder="Tỉnh / Thành phố">
                            <input type="text"
                                   name="district[]"
                                   class="address-input district-input"
                                   th:value="${addr.district}"
                                   placeholder="Quận / Huyện">
                            <input type="text"
                                   name="street[]"
                                   class="address-input street-input"
                                   th:value="${addr.street}"
                                   placeholder="Đường / Số nhà...">
                            <input type="hidden" name="addressId[]" th:value="${addr.addressId}">
                            <input type="hidden" name="isDefault[]" th:value="${addr.idAddressDefault ? 1 : 0}">
                            <button type="button" class="btn-remove">–</button>
                            <button type="button"
                                    class="btn-default-address"
                                    th:style="${addr.idAddressDefault} ? 'display:inline-flex;' : 'display:none;'">
                                Địa chỉ mặc định
                            </button>
                            <button type="button"
                                    class="btn-default"
                                    th:style="${addr.idAddressDefault} ? 'display:none;' : 'display:inline-flex;'">
                                Đặt làm mặc định
                            </button>
                        </div>
                    </div>
                </div>
                <label>Ngày sinh</label>
                <div class="mb-3">
                    <input
                            type="text"
                            id="birthday"
                            name="birthday"
                            class="form-control"
                            th:value="${user.birthday != null ? #temporals.format(user.birthday, 'yyyy-MM-dd') : ''}"
                    >
                </div>
                <label>Giới tính</label>
                <div class="d-flex gender-container" >
                    <label>
                        <input type="radio" th:field="*{gender}" value="Nam" /> Nam
                    </label>
                    <label>
                        <input type="radio" th:field="*{gender}" value="Nữ" /> Nữ
                    </label>
                </div>
                <button type="submit" class="btn">Cập nhật thông tin</button>
            </div>
        </form>
    </main>
</div>
<div class="subscribe-bar">
    <h2>ĐĂNG KÝ NHẬN ƯU ĐÃI</h2>
    <form class="subscribe-form" id="subscribeForm">
        <div class="input-wrap">
            <input type="email" id="emailInput" placeholder="Nhập email của bạn">
            <small id="emailError" class="error-msg"></small>
        </div>
        <button type="submit">ĐĂNG KÝ</button>
    </form>
</div>
<footer class="footer">
    <div class="footer-main">
        <div class="footer-col">
            <img th:src="@{/Home/Logo7.png}" alt="Nai Vang Logo" class="footer-logo">
            <p><strong>CÔNG TY TNHH MTV THƯƠNG MẠI VÀ ĐẦU TƯ LIÊN Á CHÂU</strong></p>
            <p>Giấy chứng nhận đăng ký doanh nghiệp số 0310618188, cấp ngày 29.01.2011, nơi cấp Sở Kế Hoạch và Đầu Tư TP. Hồ Chí Minh</p>
            <p>Trụ sở chính: L2-VP-01, 346 Bến Vân Đồn, Phường Vĩnh Hội, TP. Hồ Chí Minh</p>
            <p>Hotline: <a href="tel:19004449">19004449</a>
                Điện thoại: <a href="tel:02838328272">02838328272</a></p>
            <img th:src="@{/Home/Bocongthuong_1_1.webp}" alt="Đã thông báo Bộ Công Thương" class="boct-logo">
        </div>
        <div class="footer-col">
            <h4>Theo dõi chúng tôi</h4>
            <div class="social-links">
                <a href="#"><img th:src="@{/Home/Facebook.webp}" alt="Facebook"></a>
                <a href="#"><img th:src="@{/Home/Instagram.webp}" alt="Instagram"></a>
                <a href="#"><img th:src="@{/Home/Youtube.webp}" alt="YouTube"></a>
                <a href="#"><img th:src="@{/Home/Tiktok.webp}" alt="TikTok"></a>
            </div>
            <h4>Tải App Ngay</h4>
            <div class="app-links">
                <img th:src="@{/Home/Maqr.png}" alt="QR Code" class="qr-code">
                <div>
                    <a href="#"><img th:src="@{/Home/Googleplay.webp}" alt="Google Play"></a>
                    <a href="#"><img th:src="@{/Home/Appstore.webp}" alt="App Store"></a>
                </div>
            </div>
            <h4>Chấp nhận Phương thức thanh toán</h4>
            <div class="pay-methods">
                <img th:src="@{/Home/Vnpay.png}" alt="VNPay">
                <img th:src="@{/Home/Momo.webp}" alt="MoMo" class="momo-logo">
                <img th:src="@{/Home/Visa.png}" alt="Visa">
            </div>
        </div>
        <div class="footer-col">
            <h4>Về chúng tôi</h4>
            <ul>
                <li><a href="#">Giới thiệu</a></li>
                <li><a href="#">Tin Tức</a></li>
                <li><a href="#">Cẩm nang Làm đẹp</a></li>
                <li><a href="#">Tuyển dụng</a></li>
                <li><a href="#">Đổi điểm Hội Cam</a></li>
                <li><a href="#">Liên hệ</a></li>
                <li><a href="#">Địa chỉ cửa hàng</a></li>
                <li><a href="#">Cho thuê mặt bằng</a></li>
                <li><a href="#">Hợp tác cùng Guardian</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>Chính sách</h4>
            <ul>
                <li><a href="#">Chính sách và quy định chung</a></li>
                <li><a href="#">Quy định và hình thức thanh toán</a></li>
                <li><a href="#">Chính sách vận chuyển</a></li>
                <li><a href="#">Chính sách đổi/trả hàng và hoàn tiền</a></li>
                <li><a href="#">Chính sách bảo mật thông tin cá nhân</a></li>
                <li><a href="#">Hướng dẫn mua hàng</a></li>
                <li><a href="#">Quy trình xuất hóa đơn Điện Tử</a></li>
                <li><a href="#">Chính sách Thông tin Hội Cam</a></li>
            </ul>
        </div>
    </div>
    <div class="footer-bottom">
        <p>© 2025 Nai Vang. All rights reserved.</p>
    </div>
</footer>
<script>
    flatpickr("#birthday", {
        dateFormat: "Y-m-d",
        altInput: true,
        altFormat: "d/m/Y",
        locale: "vn",
        maxDate: "today",
        defaultDate: document.querySelector("#birthday").value
    });
</script>
<script th:src="@{/Customer/Profile/Profile.js}"></script>
</body>
</html>