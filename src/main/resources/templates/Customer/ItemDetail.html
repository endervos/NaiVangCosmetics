<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nai Vang Cosmetic</title>
    <link rel="icon" type="image/png" th:src="@{/Customer/Item/Image/LogoConNai.png}">
    <link rel="stylesheet" th:href="@{/Customer/ItemDetail/ItemDetail.css}">
    <!-- Slick CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Slick JS -->
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

</head>
<body>

<!-- Banner GIF full m√†n h√¨nh -->
<div class="promo-banner">
    <img th:src="@{/Customer/Item/Image/Example.gif}" alt="Promotion Nai Vang">
</div>

<!-- Header -->
<div class="header">
    <div class="container header-inner">
        <a th:href="@{/}">
            <img th:src="@{/Customer/Item/Image/Logo7.png}" alt="Logo" width="150" height="100">
        </a>


        <!-- Search -->
        <div class="search-bar">
            <div class="search-wrap">
                <input type="text" placeholder="B·∫°n c·∫ßn t√¨m ....">
                <span class="search-icon">
            <svg viewBox="0 0 24 27" aria-hidden="true">
              <path d="M10,2C4.5,2,0,6.5,0,12s4.5,10,10,10s10-4.5,10-10S15.5,2,10,2z M10,19c-3.9,0-7-3.1-7-7s3.1-7,7-7s7,3.1,7,7S13.9,19,10,19z"></path>
              <rect x="17" y="17" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -9.2844 19.5856)" width="4" height="8"></rect>
            </svg>
          </span>
            </div>
        </div>

        <!-- Icons (User + Cart) -->
        <div class="header-icons">
            <!-- User Section -->
            <div class="user-section">
                <!-- N√∫t user -->
                <button class="user-btn" aria-label="T√†i kho·∫£n">
                    <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill="currentColor"
                              d="M17.75 14c1.24 0 2.25 1.01 2.25 2.25v.92c0 .57-.18 1.13-.52 1.6C18 20.9 15.5 22 12 22s-6-1.1-7.48-3.23c-.34-.47-.52-1.03-.52-1.6v-.92C4 15.01 5.01 14 6.25 14h11.5ZM12 2a5 5 0 1 1 0 10 5 5 0 0 1 0-10Z"/>
                    </svg>
                </button>

                <!-- Dropdown (·∫©n m·∫∑c ƒë·ªãnh, hi·ªán khi hover ho·∫∑c click) -->
                <div class="user-dropdown">
                    <a th:href="@{/login}" id="login-btn" sec:authorize="isAnonymous()">ƒêƒÉng nh·∫≠p</a>
                    <a th:href="@{/sign-up}" id="subcribe-btn" sec:authorize="isAnonymous()">ƒêƒÉng k√Ω</a>

                    <a th:href="@{/profile}" id="account-info" sec:authorize="isAuthenticated()">Th√¥ng tin t√†i kho·∫£n</a>
                    <a th:href="@{/logout}" id="logout-btn" sec:authorize="isAuthenticated()">ƒêƒÉng xu·∫•t</a>
                </div>
            </div>


            <!-- Cart Section -->
            <div class="cart-section">
                <a href="#" class="cart-pill" title="Gi·ªè h√†ng">
                    <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill="currentColor"
                              d="M7 4h-2l-1 2h2l3.6 7.59-1.35 2.44C7.89 16.37 8.29 17 8.94 17h9.56v-2H9.42l1.1-2h7.25c.75 0 1.41-.41 1.75-1.03L22 7H6.42l-.7-1h1.28L7 4Zm-1 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm12 0a2 2 0 1 0 .001-3.999A2 2 0 0 0 18 20Z"/>
                    </svg>
                    <span>Gi·ªè h√†ng</span>
                </a>
            </div>

        </div>

    </div>
</div>

<!-- Menu -->
<div class="menu-bar">
    <div class="container menu-inner">

        <div class="dropdown">
            <a href="#">‚ò∞ DANH M·ª§C S·∫¢N PH·∫®M</a>
            <ul class="dropdown-content">
                <li class="has-submenu" th:each="cat : ${rootCategories}">
                    <a th:href="@{/category/{id}/item(id=${cat.categoryId})}">
                        <img class="menu-icon"
                             th:src="@{/Customer/Home/{icon}(icon=${cat.slug + '.png'})}"
                             th:alt="${cat.name}" />
                        <span th:text="${cat.name}"></span>
                    </a>
                    <ul class="submenu" th:if="${#lists.size(cat.children) > 0}">
                        <li th:each="sub : ${cat.children}">
                            <a th:href="@{/category/{id}/item(id=${sub.categoryId})}">
                                <span th:text="${sub.name}"></span>
                                <span class="count" th:text="${#lists.size(sub.items)}"></span>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>

        <!--        &lt;!&ndash; S·∫£n Ph·∫©m M·ªõi &ndash;&gt;-->
        <!--        <a href="#">S·∫¢N PH·∫®M M·ªöI</a>-->


        <div class="dropdown">
            <a href="#"> NAI VANG BEAUTY</a>
        </div>

        <!-- Deal hot -->
        <!--        <a href="#">üíñ DEAL HOT D∆Ø·ªöI 100K üíñ</a>-->

        <!-- Tin t·ª©c -->
        <div class="dropdown">
            <a href="/blog">TIN T·ª®C</a>
        </div>

        <!-- Tra c·ª©u ƒë∆°n -->
        <a href="#">TRA C·ª®U ƒê∆†N H√ÄNG</a>
    </div>
</div>



<!-- Breadcrumb -->
<nav class="breadcrumb">
    <a th:href="@{/}">
        <img th:src="@{/Customer/ItemDetail/Image/Home_icon.png}" alt="Home" class="breadcrumb-icon">
        Trang ch·ªß
    </a>
</nav>


<!-- M·ª•c s·∫£n ph·∫©m -->
<div class="product-detail-container">
    <!-- C·ªôt tr√°i: ·∫¢nh s·∫£n ph·∫©m -->
    <div class="product-images">

        <!-- ·∫¢nh ch√≠nh -->
        <div class="main-image">
            <img id="currentImage"
                 class="main-photo"
                 th:if="${primaryImage != null && primaryImage.itemImageId != null}"
                 th:src="@{'/api/item-images/blob/' + ${primaryImage.itemImageId}}"
                 th:alt="${primaryImage.alt != null ? primaryImage.alt : 'Primary image'}"
                 alt="Primary image" />
        </div>

        <!-- Thumbnails -->
        <div class="thumbnail-images">

            <!-- ·∫¢nh ch√≠nh (hi·ªÉn th·ªã ƒë·∫ßu ti√™n, c√≥ class active) -->
            <img class="thumbnail active"
                 th:if="${primaryImage != null && primaryImage.itemImageId != null}"
                 th:src="@{'/api/item-images/blob/' + ${primaryImage.itemImageId}}"
                 th:alt="${primaryImage.alt != null ? primaryImage.alt : 'Primary image'}"
                 alt="Primary image" />

            <!-- C√°c ·∫£nh ph·ª• -->
            <img th:each="img : ${subImages}"
                 th:if="${!img.isPrimary}"
                 class="thumbnail"
                 th:src="@{'/api/item-images/blob/' + ${img.itemImageId}}"
                 th:alt="${img.alt != null ? img.alt : 'Sub image'}"
                 alt="Sub image" />
        </div>
    </div>

    <!-- C·ªôt ph·∫£i: Th√¥ng tin s·∫£n ph·∫©m -->
    <div class="product-info">
        <!-- T√™n s·∫£n ph·∫©m -->
        <h1 class="product-title" th:text="${item.name}">T√™n s·∫£n ph·∫©m</h1>

        <!-- Meta: lo·∫°i s·∫£n ph·∫©m -->
        <div class="product-meta">
        <span class="category">
            Lo·∫°i s·∫£n ph·∫©m:
            <strong th:text="${item.category != null ? item.category.name : 'Ch∆∞a c√≥'}">T√™n category</strong>
        </span>
            <!--
            | <span class="sold">
                ƒê√£ b√°n: <strong th:text="${item.sold != null ? item.sold : 0}"></strong>
            </span>
            üëÜ Field 'sold' ch∆∞a c√≥ trong entity Item, c·∫ßn th√™m c·ªôt sold (int) n·∫øu mu·ªën.
            -->
        </div>

        <div class="product-rating">
            <span th:utext="${item.ratingStars}"></span>
            <span th:text="'(' + ${#numbers.formatDecimal(item.averageRating, 1, 1)} + '/5 - '
                    + ${item.reviewCount} + ' l∆∞·ª£t ƒë√°nh gi√°)'"></span>
        </div>

        <!-- Wishlist icon -->
        <div class="wishlist">
            <i id="wishlistIcon" class="fa-regular fa-heart"></i>
        </div>

        <!-- Gi√° -->
        <div class="price-box">
        <span class="current-price"
              th:text="${#numbers.formatInteger(item.price, 0, 'POINT')} + ' ƒë'">0ƒë</span>

            <!--
            <span class="old-price" th:if="${item.oldPrice != null}"
                  th:text="${#numbers.formatInteger(item.oldPrice, 0, 'POINT')} + ' ƒë'">0ƒë</span>
            <span class="discount" th:if="${item.discount != null}"
                  th:text="'-' + ${item.discount} + '%'">-0%</span>
            üëÜ Field 'oldPrice' v√† 'discount' ch∆∞a c√≥ trong entity Item.
            -->
        </div>

        <!-- M√¥ t·∫£ -->
        <p class="product-description" th:text="${item.description}">
            M√¥ t·∫£ s·∫£n ph·∫©m‚Ä¶
        </p>

        <!-- Th√¥ng tin ph·ª• (fix c·ª©ng, sau c√≥ th·ªÉ bind DB) -->
        <div class="extra-info">
            <div class="info-item">üöö <span>Mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn cho ƒë∆°n t·ª´ 199K</span></div>
            <div class="info-item">‚ö° <span>Giao h√†ng nhanh trong 2h n·ªôi th√†nh H·ªì Ch√≠ Minh</span></div>
            <div class="info-item">üõ°Ô∏è <span>Cam k·∫øt 100% ch√≠nh h√£ng t·ª´ Nai V√†ng</span></div>
            <div class="info-item">üîÑ <span>ƒê·ªïi tr·∫£ trong 15 ng√†y n·∫øu s·∫£n ph·∫©m l·ªói</span></div>
            <div class="info-item">üéÅ <span>Gi·∫£m 10% t·ªëi ƒëa 30K cho kh√°ch h√†ng l·∫ßn ƒë·∫ßu mua h√†ng</span></div>
        </div>
        <!-- N√∫t h√†nh ƒë·ªông -->
        <form th:action="@{/cart/add}" method="post">
            <input type="hidden" name="itemId" th:value="${item.itemId}" />
            <!-- S·ªë l∆∞·ª£ng -->
            <div class="quantity-box">
                <label for="quantity">S·ªë l∆∞·ª£ng:</label>

                <div class="qty-control">
                    <button type="button" id="qtyMinus" class="qty-btn">‚àí</button>

                    <input type="number"
                           id="quantity"
                           name="quantity"
                           value="1">

                    <button type="button" id="qtyPlus" class="qty-btn">+</button>
                </div>
                <!-- Hi·ªÉn th·ªã t·ªìn kho -->
                <span class="stock-status"
                      th:attr="data-stock=${stock != null ? stock : 0}"
                      th:text="${stock != null && stock > 0 ? 'C√≤n ' + stock + ' s·∫£n ph·∫©m' : 'H·∫øt h√†ng'}">
</span>

            </div>

            <div class="action-buttons">
                <button type="submit" class="add-cart">Th√™m v√†o gi·ªè h√†ng</button>
                <button type="button" class="buy-now" onclick="window.location.href='/cart'">Mua ngay</button>
            </div>
        </form>
    </div>

</div>

<div class="product-tabs">

    <div class="review-section">
        <h3>ƒê√°nh gi√° s·∫£n ph·∫©m (<span th:text="${reviewCount}">0</span>)</h3>

        <!-- N·∫øu ch∆∞a c√≥ review -->
        <div th:if="${#lists.isEmpty(reviews)}" class="no-review">
            <p>Ch∆∞a c√≥ ƒë√°nh gi√° n√†o cho s·∫£n ph·∫©m n√†y.</p>
        </div>

        <!-- N·∫øu c√≥ review -->
        <div th:each="review : ${reviews}" class="review-card">
            <div class="review-header">
                <img th:src="@{/Customer/ItemDetail/Image/UserImage.jpg}" alt="user avatar" class="review-avatar">

                <div class="review-user-info">
                    <p class="review-username" th:text="${review.customer.user.fullname}">Nguy·ªÖn VƒÉn A</p>

                    <div class="review-stars">
                    <span th:each="i : ${#numbers.sequence(1,5)}"
                          th:text="${i <= review.rating ? '‚òÖ' : '‚òÜ'}"></span>
                    </div>
                </div>

                <span class="review-date"
                      th:text="${#dates.format(review.createdAt, 'dd/MM/yyyy')}">01/01/2025</span>
            </div>

            <div class="review-content" th:text="${review.comment}">
                N·ªôi dung ƒë√°nh gi√° ·ªü ƒë√¢y...
            </div>
        </div>
    </div>



</div>





<!-- FOOTER -->
<div class="subscribe-bar">
    <h2>ƒêƒÇNG K√ù NH·∫¨N ∆ØU ƒê√ÉI</h2>
    <form class="subscribe-form" id="subscribeForm">
        <div class="input-wrap">
            <input type="email" id="emailInput" placeholder="Nh·∫≠p email c·ªßa b·∫°n">
            <!-- d√≤ng b√°o l·ªói -->
            <small id="emailError" class="error-msg"></small>
        </div>
        <button type="submit">ƒêƒÇNG K√ù</button>
    </form>
</div>



<footer class="footer">
    <div class="footer-main">
        <!-- C·ªôt 1: Logo + th√¥ng tin -->
        <div class="footer-col">
            <img th:src="@{/Customer/ItemDetail/Image/logo7.png}" alt="Nai Vang Logo" class="footer-logo">
            <p><strong>C√îNG TY TNHH MTV TH∆Ø∆†NG M·∫†I V√Ä ƒê·∫¶U T∆Ø LI√äN √Å CH√ÇU</strong></p>
            <p>Gi·∫•y ch·ª©ng nh·∫≠n ƒëƒÉng k√Ω doanh nghi·ªáp s·ªë 0310618188, c·∫•p ng√†y 29.01.2011, n∆°i c·∫•p S·ªü K·∫ø Ho·∫°ch v√† ƒê·∫ßu T∆∞ TP. H·ªì Ch√≠ Minh</p>
            <p>Tr·ª• s·ªü ch√≠nh: L2-VP-01, 346 B·∫øn V√¢n ƒê·ªìn, Ph∆∞·ªùng Vƒ©nh H·ªôi, TP. H·ªì Ch√≠ Minh</p>
            <p>Hotline: <a href="tel:19004449">19004449</a>
                ƒêi·ªán tho·∫°i: <a href="tel:02838328272">02838328272</a></p>
            <img th:src="@{/Customer/ItemDetail/Image/bocongthuong_1_1.webp}" alt="ƒê√£ th√¥ng b√°o B·ªô C√¥ng Th∆∞∆°ng" class="boct-logo">
        </div>

        <!-- C·ªôt 2: Theo d√µi + App + Thanh to√°n -->
        <div class="footer-col">
            <h4>Theo d√µi ch√∫ng t√¥i</h4>
            <div class="social-links">
                <a href="#"><img th:src="@{/Customer/ItemDetail/Image/facebook.webp}" alt="Facebook"></a>
                <a href="#"><img th:src="@{/Customer/ItemDetail/Image/instagram.webp}" alt="Instagram"></a>
                <a href="#"><img th:src="@{/Customer/ItemDetail/Image/youtube.webp}" alt="YouTube"></a>
                <a href="#"><img th:src="@{/Customer/ItemDetail/Image/tiktok.webp}" alt="TikTok"></a>
            </div>

            <h4>T·∫£i App Ngay</h4>
            <div class="app-links">
                <img th:src="@{/Customer/ItemDetail/Image/maqr.png}" alt="QR Code" class="qr-code">
                <div>
                    <a href="#"><img th:src="@{/Customer/ItemDetail/Image/googleplay.webp}" alt="Google Play"></a>
                    <a href="#"><img th:src="@{/Customer/ItemDetail/Image/appstore.webp}" alt="App Store"></a>
                </div>
            </div>

            <h4>Ch·∫•p nh·∫≠n Ph∆∞∆°ng th·ª©c thanh to√°n</h4>
            <div class="pay-methods">
                <img th:src="@{/Customer/ItemDetail/Image/vnpay.png}" alt="VNPay">
                <img th:src="@{/Customer/ItemDetail/Image/momo.webp}" alt="MoMo" class="momo-logo">
                <img th:src="@{/Customer/ItemDetail/Image/visa.png}" alt="Visa">
            </div>
        </div>

        <!-- C·ªôt 3: V·ªÅ ch√∫ng t√¥i -->
        <div class="footer-col">
            <h4>V·ªÅ ch√∫ng t√¥i</h4>
            <ul>
                <li><a href="#">Gi·ªõi thi·ªáu</a></li>
                <li><a href="#">Tin T·ª©c</a></li>
                <li><a href="#">C·∫©m nang L√†m ƒë·∫πp</a></li>
                <li><a href="#">Tuy·ªÉn d·ª•ng</a></li>
                <li><a href="#">ƒê·ªïi ƒëi·ªÉm H·ªôi Cam</a></li>
                <li><a href="#">Li√™n h·ªá</a></li>
                <li><a href="#">ƒê·ªãa ch·ªâ c·ª≠a h√†ng</a></li>
                <li><a href="#">Cho thu√™ m·∫∑t b·∫±ng</a></li>
                <li><a href="#">H·ª£p t√°c c√πng Guardian</a></li>
            </ul>
        </div>

        <!-- C·ªôt 4: Ch√≠nh s√°ch -->
        <div class="footer-col">
            <h4>Ch√≠nh s√°ch</h4>
            <ul>
                <li><a href="#">Ch√≠nh s√°ch v√† quy ƒë·ªãnh chung</a></li>
                <li><a href="#">Quy ƒë·ªãnh v√† h√¨nh th·ª©c thanh to√°n</a></li>
                <li><a href="#">Ch√≠nh s√°ch v·∫≠n chuy·ªÉn</a></li>
                <li><a href="#">Ch√≠nh s√°ch ƒë·ªïi/tr·∫£ h√†ng v√† ho√†n ti·ªÅn</a></li>
                <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t th√¥ng tin c√° nh√¢n</a></li>
                <li><a href="#">H∆∞·ªõng d·∫´n mua h√†ng</a></li>
                <li><a href="#">Quy tr√¨nh xu·∫•t h√≥a ƒë∆°n ƒêi·ªán T·ª≠</a></li>
                <li><a href="#">Ch√≠nh s√°ch Th√¥ng tin H·ªôi Cam</a></li>
            </ul>
        </div>
    </div>

    <div class="footer-bottom">
        <p>¬© 2025 Nai Vang. All rights reserved.</p>
    </div>
</footer>

<script th:src="@{/Customer/ItemDetail/ItemDetail.js}"></script>

</body>
</html>
